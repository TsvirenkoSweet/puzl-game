<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pazle</title>
    <link rel="stylesheet" href="css/main.min.css">
</head>
<body>
    <header class="bgAnimate"><h1>Игра Pazle - прокачай свои мозги</h1></header>
    <main class="bgAnimate">
        <div id="pazl">
            <button id="start" class="pulse">Начать игру</button>
        </div>
        
        <div id="columns-full">
            <div class="column"><span>A</span></div>
            <div class="column"><span>B</span></div>
            <div class="column"><span>D</span></div>
            <div class="column"><span>C</span></div>
        </div>
    </main>
    <footer class="bgAnimate">Все права - не права 2018</footer>
    <script src="js/libs.min.js"></script>
    <script src="main.js"></script>
    <script>

(function() {
    
  var id_ = 'columns-full';
  var cols_ = document.querySelectorAll('#' + id_ + ' .column');
  var dragSrcEl_ = null;

  this.handleDragStart = function(e) {
    e.dataTransfer.effectAllowed = 'move';
    console.log(e.dataTransfer);
    e.dataTransfer.setData('text/html', this.innerHTML);
    console.log(e.dataTransfer.setData('text/html', this.innerHTML));
    dragSrcEl_ = this;
  };

  this.handleDragOver = function(e) {
    if (e.preventDefault) {
        // Для отпускания элемента
      e.preventDefault(); 
    }
    return false;
  };

  this.handleDrop = function(e) {
    // this/e.target это текущий элемент, который взят

    if (e.stopPropagation) {
      e.stopPropagation();
    }

    // Если отпускаем в текущее окошко, то ничего не делаем
    if (dragSrcEl_ != this) {
      dragSrcEl_.innerHTML = this.innerHTML;
      this.innerHTML = e.dataTransfer.getData('text/html');
    }

    return false;
  };



  [].forEach.call(cols_, function (col) {
    // Включаем захват элементов
    col.setAttribute('draggable', 'true');  
    col.addEventListener('dragstart', this.handleDragStart, false);
    col.addEventListener('dragover', this.handleDragOver, false);
    col.addEventListener('drop', this.handleDrop, false);
  });
})();

    </script>
</body>
</html>